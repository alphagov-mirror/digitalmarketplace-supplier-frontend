{% extends "_base_page.html" %}

{% block pageTitle %}
  DUNS number – Create a supplier account – Digital Marketplace
{% endblock %}

{% block breadcrumb %}
  {{ govukBreadcrumbs({
    "items": [
      {
        "text": "Digital Marketplace",
        "href": "/"
      },
      {
        "text": "Become a supplier",
        "href": url_for('.become_a_supplier')
      },
      {
        "text": "Create an account",
        "href": url_for('.create_new_supplier')
      },
      {
        "text": "DUNS number"
      }
    ]
  }) }}
{% endblock %}

{% block main_content %}
<div class="grid-row">
  {% if errors.get("duns_number", {}).get("message", None) == 'DUNS number already used' %}
    {% with lede = "A supplier account already exists with that DUNS number",
            description = 'If you no longer have your account details, or if you think this may be an error, email <a class="govuk-link" href="mailto:{support_email_address}?subject=DUNS%20number%20question" title="Please contact {support_email_address}">{support_email_address}</a>'.format(support_email_address=support_email_address)|safe
    %}
      {% include 'toolkit/forms/validation.html' %}
    {% endwith %}
  {% elif errors %}
    {% include 'toolkit/forms/validation.html' %}
  {% endif %}

  <div class="column-two-thirds">
    <h1 class="govuk-heading-l">Enter your DUNS number</h1>


    <form method="POST" action="{{ url_for('.duns_number') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
      <div class="dmspeak">
        <p class="govuk-body">If you registered your business with Companies House, you will automatically have been given a unique
          DUNS number.</p>
        <p class="govuk-body">The Digital Marketplace uses this to check if your business already has a supplier account.</p>
      </div>
        <p class="govuk-body-l">You can either:</p>
        <ul class="govuk-list govuk-list--bullet">
          <li><a class="govuk-link" href="https://www.dnb.co.uk/duns-number/lookup.html" rel="external">find your DUNS number</a> on the
            Dun &amp; Bradstreet website</li>
          <li><a class="govuk-link" href="https://www.dnb.co.uk/duns-number/lookup/request-a-duns-number.html" rel="external">apply for
            a DUNS number</a> if you don&rsquo;t have one</li>
        </ul>

      {% with question = "DUNS number",
              name = "duns_number",
              value = form.duns_number.data,
              error = errors.get("duns_number", {}).get("message", None),
              question_advice = question_advice,
              hint = "This is a 9 digit number" %}
        {% include "toolkit/forms/textbox.html" %}
      {% endwith %}

      {{ govukButton({
        "text": "Save and continue",
      }) }}
    </form>
  </div>
</div>
{% endblock %}
